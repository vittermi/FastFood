<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>User Preferences – FastFood</title>

    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet" />
    <link href="../css/main.css" rel="stylesheet" />
</head>

<body class="d-flex flex-column min-vh-100">

    <nav class="navbar navbar-expand-lg navbar-light bg-white shadow fixed-top">
        <div class="container-fluid">
            <a class="navbar-brand fw-bold text-primary" href="/login">FastFood</a>

            <button class="btn btn-outline-secondary ms-auto" id="menuButton">Menu</button>
        </div>
    </nav>

    <main class="container pt-5 mt-4 mb-4 flex-grow-1">
        <div class="row justify-content-center">
            <div class="col-12 col-md-8 col-lg-6 mx-auto">
                <div class="card shadow-sm">
                    <div class="card-body p-4">
                        <form id="prefsForm" novalidate>
                            <div id="prefsAlert" class="alert alert-danger d-none" role="alert"></div>
                            <fieldset class="mb-4">
                                <legend class="h6 mb-3">Preferred payment type</legend>
                                <div class="form-check">
                                    <input class="form-check-input" type="radio" name="paymentType" id="paymentTypeCash"
                                        value="cash" required />
                                    <label class="form-check-label" for="paymentTypeCash">Cash</label>
                                </div>
                                <div class="form-check mt-2">
                                    <input class="form-check-input" type="radio" name="paymentType" id="paymentTypeCard"
                                        value="card" required />
                                    <label class="form-check-label" for="paymentTypeCard">Card</label>
                                </div>
                                <div class="invalid-feedback">Please select a payment type.</div>
                            </fieldset>

                            <div id="cardFields" class="row g-3 d-none" aria-hidden="true">
                                <div class="col-12">
                                    <label for="cardHolder" class="form-label">Cardholder name</label>
                                    <input type="text" class="form-control" id="cardHolder" autocomplete="cc-name"
                                        placeholder="Cardholder name" />
                                    <div class="form-text">As shown on the card.</div>
                                </div>
                                <div class="col-12">
                                    <label for="cardNumber" class="form-label">Card number</label>
                                    <input type="text" inputmode="numeric" class="form-control" id="cardNumber"
                                        autocomplete="cc-number" placeholder="1234 5678 9012 3456" />
                                </div>
                                <div class="col-6">
                                    <label for="cardExpiry" class="form-label">Expiry (MM/YY)</label>
                                    <input type="text" inputmode="numeric" class="form-control" id="cardExpiry"
                                        autocomplete="cc-exp" placeholder="MM/YY" />
                                </div>
                                <div class="col-6">
                                    <label for="cardCvv" class="form-label">CVV/CVC</label>
                                    <input type="password" inputmode="numeric" class="form-control" id="cardCvv"
                                        autocomplete="cc-csc" placeholder="CVV" />
                                </div>
                            </div>

                            <section class="mt-4">
                                <h2 class="h6 mb-2">Allergens</h2>
                                <p class="text-muted small mb-3">Add allergens so that we can warn you if some dishes may contain them.</p>
                                <div class="input-group">
                                    <label class="visually-hidden" for="allergenInput">Allergen</label>
                                    <input id="allergenInput" type="text" class="form-control"
                                        placeholder="Add allergen (e.g., Gluten)" />
                                    <button id="btnAddAllergen" type="button" class="btn btn-outline-primary"
                                        aria-label="Add allergen">+</button>
                                </div>
                                <div id="allergensChips" class="d-flex flex-wrap gap-2 mt-2" aria-label="Allergens list"></div>
                            </section>

                            <fieldset class="mt-4">
                                <legend class="h6 mb-2">Required consents</legend>
                                <div class="form-check">
                                    <input class="form-check-input" type="checkbox" id="consentTos" required />
                                    <label class="form-check-label" for="consentTos">I agree to the Terms of
                                        Service</label>
                                    <div class="invalid-feedback">This consent is required to proceed.</div>
                                </div>
                                <div class="form-check mt-2">
                                    <input class="form-check-input" type="checkbox" id="consentPrivacy" required />
                                    <label class="form-check-label" for="consentPrivacy">I agree to the Privacy
                                        Policy</label>
                                    <div class="invalid-feedback">This consent is required to proceed.</div>
                                </div>
                            </fieldset>

                            <fieldset class="mt-4">
                                <legend class="h6 mb-2">Optional consents</legend>
                                <div class="form-check mt-2">
                                    <input class="form-check-input" type="checkbox" id="consentOffers" />
                                    <label class="form-check-label" for="consentOffers">Personalized offers</label>
                                </div>
                            </fieldset>

                            <div class="mt-4 d-grid gap-2 d-md-flex justify-content-md-end">
                                <button id="btnSavePrefs" type="submit" class="btn btn-primary">Save
                                    Preferences</button>
                                <button id="btnResetPrefs" type="reset" class="btn btn-outline-secondary">Reset</button>
                            </div>
                        </form>
                    </div>
                </div>
            </div>
        </div>
    </main>

    <footer class="bg-light text-center text-muted py-3 mt-auto">
        923130 - Università degli studi di Milano
    </footer>

    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"></script>
    <script type="module" src="/js/preferences.js"></script>
</body>

</html>